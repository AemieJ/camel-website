{{ partial "header.html" . }}

<div class="body">
    <main role="main" class="doc blog list">
        <aside>
            <h3>Categories</h3>
            <ul>
            {{ range .Site.Taxonomies.categories.Alphabetical }}
                <li><a class="category" href="{{ "/categories/" | relURL }}{{ .Name | urlize }}/">{{ .Name | upper }}<span>{{ .Count }}</span></a></li>
            {{ end }}
            </ul>
        </aside>
        <div>
            {{ $pages := ($.Paginator 3).Pages }}
            {{ range $pages }}
                {{ .Render "summary" }}
            {{ end }}
            
            {{ $page := .Paginator }}
            {{ if gt $page.TotalPages 1 }}
            {{ $.Scratch.Set "dot_rendered" false }}
            <nav aria-label="page navigation">
                <ul class="pagination">
                    <!-- Don't show on 1st and 2nd page -->
                    {{ if and (ne $page.PageNumber 1) }}
                    <li class="page-item"><a href="{{ $page.First.URL }}" rel="first" class="page-link">««</a></li>
                    {{ end }}

                    {{ if $page.HasPrev  }}
                    <li class="page-item"><a href="{{ $page.Prev.URL }}" rel="prev" class="page-link">«</a></li>
                    {{ end }}

                    {{ range $page.Pagers }}
                        {{ if eq . $page }} <!-- Current Page -->
                        <li class="page-item active"><a href="{{ .URL }}" class="page-link">{{ .PageNumber }}</a></li>
                        {{ else if and (ge .PageNumber (sub $page.PageNumber 2)) (le .PageNumber (add $page.PageNumber 2)) }}
                        {{ $.Scratch.Set "dot_rendered" false }} <!-- Render prev 2 page and next 2 pages -->
                        <li class="page-item"><a href="{{ .URL }}" class="page-link">{{ .PageNumber }}</a></li>
                        {{ else if eq ($.Scratch.Get "dot_rendered") false }} <!-- render skip pages -->
                        {{ $.Scratch.Set "dot_rendered" true }}
                        <li class="page-item disabled"><a class="page-link">...</a></li>
                        {{ end }}
                    {{ end }}

                    {{ if $page.HasNext }}
                    <li class="page-item"><a href="{{ $page.Next.URL }}" rel="next" class="page-link">»</a></li>
                    {{ end }}

                    <!-- Don't show on last and 2nd last page -->
                    {{ if and (ne $page.PageNumber $page.TotalPages) }}
                    <li class="page-item"><a href="{{ $page.Last.URL }}" rel="last" class="page-link">»»</a></li>
                    {{ end }}
                </ul>
            </nav>
            {{ end }}
        </div>
    </main>
</div>

{{ partial "footer.html" . }}